# PR #48780: Support LSP document symbols in breadcrumbs and outline UI

_Merged: 2026-02-11T19:30:04Z_
_PR: https://github.com/zed-industries/zed/pull/48780_

## Documentation Suggestions

### Summary
This PR adds a new `document_symbols` setting that lets users switch between tree-sitter and LSP-based document symbols for outlines, breadcrumbs, and the outline modal. Documentation needs to explain the new setting, when to use it, and how it affects the user experience.

### Suggested Changes

#### 1. docs/src/reference/all-settings.md

- **Section**: Language Settings (under `document_folding_ranges`)
- **Change**: Add
- **Target keyword**: document symbols setting
- **Frontmatter**: No change needed (page already has appropriate metadata)
- **Links**: 
  - Link to `/configuration/configuring-languages` (general language settings overview)
  - Link to `/getting-started/language-servers` (LSP context)
  - Link to `/navigation` (outline/breadcrumb features)
- **Suggestion**:

After the `document_folding_ranges` entry, add:

```markdown
### `document_symbols`

> **Preview:** This feature is available in Zed Preview. It will be included in the next Stable release.

Controls the source of document symbols used for outlines and breadcrumbs.

- **Default**: `off`
- **Options**:
  - `"off"`: Use tree-sitter queries to compute document symbols (default).
  - `"on"`: Use the language server's `textDocument/documentSymbol` LSP response. When enabled, tree-sitter is not used for document symbols.

Example:

```json
{
  "languages": {
    "TypeScript": {
      "document_symbols": "on"
    }
  }
}
```

LSP document symbols can provide more accurate symbols for complex language features (e.g., generic types, macros, decorators) that tree-sitter may not handle well. Use this when your language server provides better symbol information than the tree-sitter grammar.
```

- **Full-file brand pass**: Required: no. The all-settings.md reference page uses consistent technical documentation style throughout; this addition follows the same pattern and doesn't require reviewing the full file.

- **Brand voice scorecard**:

  | Criterion            | Score | Notes |
  | -------------------- | ----- | ----- |
  | Technical Grounding  | 5     | Precise technical terms (tree-sitter, LSP, textDocument/documentSymbol) |
  | Natural Syntax       | 4     | Clear, direct phrasing; could tighten slightly |
  | Quiet Confidence     | 5     | States facts without hedging |
  | Developer Respect    | 5     | Explains when/why to use without prescribing |
  | Information Priority | 5     | Starts with what it does, then provides context |
  | Specificity          | 5     | Concrete examples, specific protocol names |
  | Voice Consistency    | 4     | Matches reference doc style; slightly more conversational than typical entry |
  | Earned Claims        | 5     | "More accurate" is qualified with examples |
  | **TOTAL**            | 38/40 | Passes threshold |

#### 2. docs/src/navigation.md

- **Section**: Outline/breadcrumb features (if exists; otherwise create new section)
- **Change**: Add
- **Target keyword**: code navigation symbols
- **Frontmatter**:
  ```yaml
  ---
  title: Navigate Code with Symbols and Breadcrumbs
  description: Use outlines, breadcrumbs, and symbol navigation to move through your codebase efficiently in Zed.
  ---
  ```
- **Links**:
  - Link to `/reference/all-settings#document_symbols` (new setting)
  - Link to `/getting-started/language-servers` (LSP context)
  - Link to `/configuration/configuring-languages` (language-specific configuration)
  - Link to `https://zed.dev/features/code-navigation` (marketing page for navigation features)
- **Suggestion**:

If a navigation.md page exists, add a new section. If not, create a page with frontmatter and this section:

```markdown
## Symbol Sources

> **Preview:** This feature is available in Zed Preview. It will be included in the next Stable release.

Zed computes document symbols for outlines and breadcrumbs using either tree-sitter or your language server.

By default, Zed uses tree-sitter to parse your code and extract symbols. For some languages, language servers provide more accurate symbols through the LSP `textDocument/documentSymbol` request.

To use LSP document symbols:

1. Open the Settings Editor ({#kb zed::OpenSettings})
2. Navigate to **Languages** → **[Your Language]**
3. Enable **Document Symbols**

Or add to your `settings.json`:

```json
{
  "languages": {
    "TypeScript": {
      "document_symbols": "on"
    }
  }
}
```

Language servers may provide better symbol information for:
- Generic types and complex type parameters
- Macro expansions and code generation
- Decorators and annotations
- Nested modules and namespaces

When `document_symbols` is enabled, Zed fetches symbols from your language server instead of using tree-sitter. Symbols appear in breadcrumbs, the outline modal ({#kb outline::Toggle}), and the outline panel.
```

- **Full-file brand pass**: Required: yes. If creating a new navigation.md page, the entire page needs review. If adding to an existing page, review the full file to ensure consistent voice.

- **Brand voice scorecard**:

  | Criterion            | Score | Notes |
  | -------------------- | ----- | ----- |
  | Technical Grounding  | 5     | Specific protocol names, technical concepts |
  | Natural Syntax       | 5     | Clear, natural phrasing throughout |
  | Quiet Confidence     | 5     | No hedging; states facts directly |
  | Developer Respect    | 5     | Explains tradeoffs without prescribing |
  | Information Priority | 5     | Leads with default, then explains alternative |
  | Specificity          | 5     | Concrete examples, specific use cases |
  | Voice Consistency    | 5     | Matches Zed docs style |
  | Earned Claims        | 5     | "More accurate" qualified with specific scenarios |
  | **TOTAL**            | 40/40 | Passes threshold |

### Notes for Reviewer

1. The PR introduces a setting that changes a fundamental aspect of how symbols are computed. This warrants clear documentation so users understand when to use it.
2. The setting is opt-in (`off` by default), so docs should explain the benefits of switching rather than just the mechanism.
3. The diff shows this is shipping in Preview first—I've added appropriate Preview callouts per the guidelines.
4. The brand voice scoring is conservative; the suggested text prioritizes clarity and technical accuracy over marketing language.
5. If a `navigation.md` page doesn't exist, consider whether symbol navigation belongs in an existing page (e.g., editor features, language features) or warrants its own page.
