# PR #49015: settings: Add ability to select audio input/output devices for collab

_Merged: 2026-02-12T13:27:56Z_
_PR: https://github.com/zed-industries/zed/pull/49015_

## Documentation Suggestions

### Summary
This change adds experimental audio device selection for input/output devices, includes a new audio test UI, and updates audio dependencies (cpal 0.17, rodio). Users can now select specific audio devices instead of using system defaults, which needs documentation in the collaboration/audio settings area.

### Suggested Changes

#### 1. docs/src/collaboration.md

- **Section**: "Audio Settings" (existing section to update)
- **Change**: Add
- **Target keyword**: "audio device selection Zed"
- **Frontmatter**:
  ```yaml
  ---
  title: Collaboration – Zed Docs
  description: Configure audio settings, channels, and device selection for calls in Zed
  ---
  ```
- **Links**: 
  - [Settings Editor](/configuration/settings-editor) (when showing how to configure)
  - [Troubleshooting audio](/troubleshooting#audio-issues) (if such section exists)
  - [Channels](/collaboration#channels) (internal to same doc)
  - https://zed.dev/features/collaboration (marketing link for main collaboration feature)
- **Suggestion**: 

Add a new subsection under "Audio Settings" that documents the device selection feature:

```markdown
### Selecting Audio Devices

> **Preview:** This feature is available in Zed Preview. It will be included in the next Stable release.

You can select specific input and output audio devices instead of using system defaults. To configure audio devices:

1. Open {#kb settings::OpenSettings}
2. Navigate to **Collaboration** > **Experimental**
3. Use the **Output Audio Device** and **Input Audio Device** dropdowns to select your preferred devices

Changes take effect immediately. If you select a device that becomes unavailable, Zed falls back to system defaults.

To test your audio configuration, click **Test Audio** in the same section. This opens a window where you can verify your microphone and speaker work correctly with the selected devices.

**JSON configuration:**

```json
{
  "audio": {
    "experimental.output_audio_device": "Device Name (device-id)",
    "experimental.input_audio_device": "Device Name (device-id)"
  }
}
```

Set either value to `null` to use system defaults.
```

- **Full-file brand pass**: **Required: yes.** Review the entire `docs/src/collaboration.md` file for hedging language ("simply", "easily", "just") and ensure all keybindings use `{#kb action::Name}` syntax rather than hardcoded keys. Verify H1→H2→H3 hierarchy is preserved after adding this subsection. Confirm the file has at least 3 internal links and includes the marketing link suggested above.

- **Brand voice scorecard**:

  | Criterion            | Score | Notes |
  | -------------------- | ----- | ----- |
  | Technical Grounding  | 4     | References specific settings paths and JSON structure |
  | Natural Syntax       | 4     | Direct instructions without filler words |
  | Quiet Confidence     | 5     | States functionality plainly without hype |
  | Developer Respect    | 4     | Provides both UI and JSON paths for different workflows |
  | Information Priority | 5     | Leads with the action ("You can select"), then details |
  | Specificity          | 4     | Names exact settings locations and behaviors |
  | Voice Consistency    | 4     | Uses "you" voice and present tense throughout |
  | Earned Claims        | 5     | No unearned superlatives; describes actual behavior |
  | **TOTAL**            | 35/40 |       |

  Pass threshold: all criteria 4+. ✅

#### 2. assets/settings/default.json comments

- **Section**: N/A (code comments, not docs markdown)
- **Change**: Already updated in diff
- **Target keyword**: N/A
- **Frontmatter**: N/A
- **Links**: N/A
- **Suggestion**: 

The diff already includes appropriate inline documentation in `default.json`:

```json
// Requires 'rodio_audio: true'
//
// Select specific output audio device.
// `null` means use system default.
// Any unrecognized output device will fall back to system default.
"experimental.output_audio_device": null,
```

This is sufficient for in-editor discovery. No additional changes needed to the default.json comments themselves.

- **Full-file brand pass**: N/A (not a docs file)
- **Brand voice scorecard**: N/A (code comments have different conventions)

### Notes for Reviewer

- The feature is marked "experimental" with the `experimental.` prefix in settings paths, which aligns with the Preview release callout strategy
- The audio test window is accessible via button in Settings UI; this could be mentioned in troubleshooting docs if audio issues are a common support topic
- The JSON examples use the actual device ID format that cpal's `DeviceId::to_string()` produces; users should copy these from the dropdown rather than manually entering them
- If `docs/src/troubleshooting.md` exists and has an audio section, consider adding a bullet: "Use the **Test Audio** button in **Settings** > **Collaboration** > **Experimental** to verify your device configuration"
