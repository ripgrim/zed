# PR #47860: search: Support brace syntax in project search include/exclude patterns 

_Merged: 2026-02-12T13:00:32Z_
_PR: https://github.com/zed-industries/zed/pull/47860_

## Documentation Suggestions

### Summary
The code change fixes a bug where comma-separated glob patterns in Project Search filters would incorrectly split patterns containing brace expansions like `{a,b}`. This contradicts existing documentation that states brace expansions are not supported. The docs need updating to clarify that while full shell-style brace expansion isn't implemented, braces within patterns are now preserved correctly when using comma-separated patterns.

### Suggested Changes

#### 1. docs/src/globs.md

- **Section**: "Introduction" and add new "Multiple Patterns" section
- **Change**: Update existing content and add new section
- **Target keyword**: glob pattern multiple files
- **Frontmatter**:
  ```yaml
  ---
  title: Glob Patterns - Zed
  description: How glob patterns work in Zed for file matching, search filtering, and configuration. Syntax reference and examples including multiple patterns.
  ---
  ```
- **Links**: 
  - [Project Search](./finding-navigating.md#project-search)
  - [File Scan Inclusions setting](./reference/all-settings.md#file-scan-inclusions)
  - [Multibuffers](./multibuffers.md)
  - Marketing link: [Zed search features](https://zed.dev/features/search)

- **Suggestion**:

Add a new section after "Introduction" and before "Examples":

```markdown
### Multiple Patterns

> **Changed in Preview (v0.225).** See [release notes](/releases#0.225).

You can specify multiple glob patterns in Project Search filters by separating them with commas. When using comma-separated patterns, Zed correctly handles braces within individual patterns:

- `*.ts, *.tsx` — Match TypeScript and TSX files
- `src/{components,utils}/**/*.ts, tests/**/*.test.ts` — Match TypeScript files in specific directories plus test files

Each pattern is evaluated independently. Commas inside braces (like `{a,b}`) are treated as part of the pattern, not as separators.

**Important:** While braces are preserved in patterns, Zed does not expand them into multiple patterns. The pattern `src/{a,b}/*.ts` matches the literal path structure, not `src/a/*.ts` OR `src/b/*.ts`. This differs from shell behavior.
```

Also update the existing note in the "Special Character" table section:

Change:
```markdown
Notes:

1. Shell-style brace-expansions like `{a,b,c}` are not supported.
```

To:
```markdown
Notes:

1. Brace characters `{` and `}` are literal pattern characters, not expansion operators. The pattern `src/{a,b}/*.ts` matches paths containing the literal text `{a,b}`, not paths matching either `src/a/*.ts` or `src/b/*.ts` as in shell globbing.
```

- **Full-file brand pass**: Required: yes. The existing content passes brand rubric overall, but the opening sentence in "Glob Flavor" contains awkward phrasing ("supported by sh, bash, zsh, etc. A glob is similar but distinct from a regex (regular expression). You may be In Zed these are commonly used when matching filenames.") — the "You may be In Zed" fragment appears to be a typo or editing artifact and should be removed. Change to: "...supported by sh, bash, zsh, etc. A glob is similar but distinct from a [regex (regular expression)](https://en.wikipedia.org/wiki/Regular_expression). In Zed, globs are commonly used when matching filenames."

- **Brand voice scorecard**:

  | Criterion            | Score | Notes |
  | -------------------- | ----- | ----- |
  | Technical Grounding  | 5/5   | Concrete code examples, clear distinction between Zed behavior and shell behavior |
  | Natural Syntax       | 5/5   | Direct statements, no fluff |
  | Quiet Confidence     | 4/5   | Explains limitation clearly without apologizing |
  | Developer Respect    | 5/5   | Assumes reader understands shell globbing, provides specific contrasts |
  | Information Priority | 5/5   | Leads with what works, then clarifies the limitation |
  | Specificity          | 5/5   | Exact pattern examples with literal outcomes |
  | Voice Consistency    | 4/5   | Matches existing docs tone |
  | Earned Claims        | 5/5   | No marketing, just facts about behavior |
  | **TOTAL**            | 38/40 | Passes (all criteria 4+) |

### Notes for Reviewer

The code change specifically addresses comma-splitting logic to respect brace depth, preventing incorrect splits on commas inside braces. However, the existing docs state "Shell-style brace-expansions like `{a,b,c}` are not supported." This is technically true—Zed doesn't expand braces into multiple patterns—but could mislead users into thinking braces can't be used at all. The suggested update clarifies that braces work as literal characters in patterns, and that comma-separation now correctly handles patterns containing braces.
